
# /pm/look
描述：查看玩家

<br>

参数：<br>
name - 玩家名

<br>

返回：<br>
status - 状态，200为成功，400为错误，其它为异常<br>
error - 错误原因，只在出错时返回。并且在出错时，不会返回接下来的这些字段<br>
<br>
name - 玩家名<br>
online - 在线状态，1=在线，0=离线<br>
health - 生命值<br>
maxHealth - 最大生命值<br>
mana - 魔力<br>
maxMana - 最大魔力<br>
inventory - 背包数据<br>
extraSlot -恶魔之心（物品id：3335），1=已使用，0=未使用<br>
spawnX - 生成点X<br>
spawnY - 生成点Y<br>
skinVariant - <br>
hair - <br>
hairDye - <br>
hairColor - <br>
pantsColor - <br>
shirtColor - <br>
underShirtColor - <br>
shoeColor - <br>
hideVisuals - <br>
skinColor - <br>
eyeColor - <br>
questsCompleted - 渔夫任务次数<br>
usingBiomeTorches - 生物群落火把交换，1=开，0=关<br>
happyFunTorchTime - <br>
unlockedBiomeTorches - 火把神徽章（物品id：5043），1=已使用，0=未使用<br>
currentLoadoutIndex - 装备123启用的是哪一套，0=装备1, 1=装备2, 2=装备3<br>
ateArtisanBread - 工匠面包（物品id：5326），1=已使用，0=未使用<br>
usedAegisCrystal - 生命水晶（物品id：5337），1=已使用，0=未使用<br>
usedAegisFruit - 埃癸斯果（物品id：5338），1=已使用，0=未使用<br>
usedArcaneCrystal - 奥术水晶（物品id：5339），1=已使用，0=未使用<br>
usedGalaxyPearl - 银河珍珠（物品id：5340），1=已使用，0=未使用<br>
usedGummyWorm - 黏性蠕虫（物品id：5341），1=已使用，0=未使用<br>
usedAmbrosia - 珍馐（物品id：5342），1=已使用，0=未使用<br>
unlockedSuperCart - 矿车升级包（物品id：5289），1=已使用，0=未使用<br>
enabledSuperCart - 超级矿车，1=已启用，0=未启用。使用矿车升级包后，在工具栏的矿车处有开关按钮。<br>

<br>

背包读取：<br>

inventory的格式为：`物品id,堆叠数,词缀~物品id,堆叠数,词缀~物品id,堆叠数,词缀...`。<br>
1、先以 `~` 为分隔符，分割字符串，目前分割出的数组长度为350，即能读取到350个物品的数据。<br>
2、在上一步的基础上，使用 `,` 为分隔符，分割字符串，数组结果是是 `[物品id，堆叠数, 词缀]`。<br>
3、索引值：
```
0 ~ 50, 背包
50 ~ 59, 钱币弹药
59 ~ 69, 装备
69 ~ 79, 时装
79 ~ 89, 染料
89 ~ 94, 工具栏
94 ~ 99, 工具栏-染料
99 ~ 139, 储蓄罐
139 ~ 179, 保险箱
179, 垃圾桶
180 ~ 220, 护卫熔炉
220 ~ 260, 虚空保险箱

260 ~ 270, 装备1-装备
270 ~ 280, 装备1-时装
280 ~ 290, 装备1-染料
290 ~ 300, 装备2-装备
300 ~ 310, 装备2-时装
310 ~ 320, 装备2-染料
320 ~ 330, 装备3-装备
330 ~ 340, 装备3-时装
340 ~ 350, 装备3-染料

注意：虽然出现了4套装备数据，实际上最基础的那一套（59~89）始终有数据，当启用装备1时，装备1（260~290）数据将为空。
```

<br>

示例:

查看指定玩家，`/pm/look?token={{token}}&name=hf`
```json
{
    "status": "200",
    "name": "hf",
    "online": 0,
    "health": 100,
    "maxHealth": 100,
    "mana": 20,
    "maxMana": 20,
    "inventory": "3507,1,0~3509,1,0~3506,1,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0~0,0,0",
    "extraSlot": 0,
    "spawnX": 4198,
    "spawnY": 562,
    "skinVariant": 3,
    "hair": 149,
    "hairDye": 0,
    "hairColor": -13149481,
    "pantsColor": -5249281,
    "shirtColor": -7559761,
    "underShirtColor": -2640736,
    "shoeColor": -12818016,
    "hideVisuals": 0,
    "skinColor": -10846721,
    "eyeColor": -11838871,
    "questsCompleted": 0,
    "usingBiomeTorches": 0,
    "happyFunTorchTime": 0,
    "unlockedBiomeTorches": 0,
    "currentLoadoutIndex": 0,
    "ateArtisanBread": 0,
    "usedAegisCrystal": 0,
    "usedAegisFruit": 0,
    "usedArcaneCrystal": 0,
    "usedGalaxyPearl": 0,
    "usedGummyWorm": 0,
    "usedAmbrosia": 0,
    "unlockedSuperCart": 0,
    "enabledSuperCart": 0
}
```

---
<br>
<br>

# /pm/export
描述：导出玩家<br>

<br>

参数：<br>
name - 玩家名<br>
hostpath - 是否返回服务器所在路径，可选，boolean类型<br>
base64 - 是否将玩家存档转成base64，可选，boolean类型<br>

<br>

返回：<br>
status - 状态，200为成功，400为错误，其它为异常<br>
error - 错误原因，只在出错时返回。并且在出错时，不会返回接下来的这些字段<br>

<br>

names - 玩家名，字符串数组<br>
path - 存档的相对路径<br>
hostpath - 服务器所在路径<br>
base64s - 返回存档的base64字符串，仅在请求时添加参数 `base64=true` 才返回，字符串数组<br>

<br>

示例:

导出单个玩家，并返回文件所在目录，`/pm/export?token={{token}}&name=hf`
```json
{
    "status": "200",
    "names": [
        "hf"
    ],
    "path": "tshock\\PlayerManager"
}
```

<br>

导出单个玩家，并将存档转成base64字符串进行返回，`/pm/export?token={{token}}&name=hf&base64=true`
```json
{
    "status": "200",
    "names": [
        "hf"
    ],
    "path": "tshock\\PlayerManager",
    "base64s": [
        "9SDqKKTfxU……"
    ]
}
```

<br>

导出全部玩家，`/pm/export?token={{token}}&name=*&hostpath=true`
```json
{
    "status": "200",
    "names": [
        "hf",
        "Joy"
    ],
    "path": "tshock\\PlayerManager",
    "hostpath": "T:\\iTShock\\main"
}
```

---